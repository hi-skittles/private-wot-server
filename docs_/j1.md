
# What Can Be Done with "eventsData" on the Client

Based on the client scripts in `client/res/scripts/client` and common directories, here's a comprehensive list of how `eventsData` is used by the client:

## Storage and Initialization
- `eventsData` is initialized in the `PlayerAccount.__init__` method from the account repository
- It's stored as a dictionary in the player's account object
- The data is synchronized between server and client during updates

## Data Structure and Types
The `eventsData` dictionary contains different types of event data, categorized by constants defined in `EVENT_CLIENT_DATA`:
- `ACTION` (1): Game actions/promotions
- `QUEST` (3): Regular quests
- `HISTORICAL_BATTLES` (5): Historical battle events
- `INGAME_EVENTS` (7): In-game events including event battles
- `NOTIFICATIONS` (9): Event notifications
- `PERSONAL_QUEST` (11): Personal quests
- `FORT_QUEST` (13): Stronghold/Fortress quests

## Data Handling
- Data is compressed with zlib and serialized with cPickle before transmission
- On the client, it's decompressed and deserialized before use
- The `EventsCache` class provides methods to access different types of event data

## Client Usage

### 1. Quest and Event Display
- `QuestsCurrentTab` uses eventsData to display current quests and events in the UI
- Events are filtered, sorted, and displayed based on type (quests, actions, etc.)
- Completed events can be hidden based on user preferences

### 2. UI Notifications
- `QuestsControl` uses eventsData to show notifications about available quests
- Alerts users about quests that need attention (rewards to collect, new quests available)
- Controls the highlighting of quest-related UI elements

### 3. Event Processing
- The client processes different event types from eventsData:
  - Regular quests (battle quests, token quests)
  - Actions (discounts, bonuses)
  - Historical battles
  - Event battles
  - Personal quests
  - Fortress/Stronghold quests

### 4. Custom Game Features
- Used to change hangar appearance (as seen in the `changeHangar` function)
- Can control special game modes and event battles
- Provides data for time-limited events and activities

### 5. Event Tracking
- Tracks event completion status
- Monitors time-limited events (start/end times)
- Handles event requirements and rewards

### 6. UI Updates
- When eventsData changes, it triggers the `events.onEventsDataChanged()` event
- This causes UI components to refresh and display updated information
- The client listens for these updates via `g_clientUpdateManager.addCallbacks({'cache.eventsData': self.__onEventsUpdated})`

## Technical Implementation
- Data synchronization uses the `__synchronizeCacheDict` method in Account.py
- The EventsCache class provides a centralized way to access different types of event data
- The client maintains a cache of event data for efficient access

In summary, `eventsData` is a central mechanism for delivering and managing time-limited events, quests, actions, and notifications to the client. It controls what special events are available to the player and how they're presented in the user interface.