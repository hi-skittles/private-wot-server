
# Examples of What Can Be Done with `eventsData` on the Client

Based on the code analysis, here are concrete examples of different types of events and what can be done with `eventsData` on the client:

## 1. Changing the Hangar Appearance

```python
# Server-side code (AccountRequests.py)
def changeHangar(proxy, requestID, arr):
    basic_name, premium_name = arr
    if basic_name == '' and premium_name == '':
        basic_name = 'hangar_v2'
        premium_name = 'hangar_premium_v2'
    elif premium_name == '':
        premium_name = basic_name
    
    rdata = yield async(StatsHandler.get_stats, cbname='callback')(proxy.normalizedName, 'eventsData')
    udata = rdata
    udata[('eventsData', '_r')][9] = zlib.compress(
        cPickle.dumps([{'type': 'cmd_change_hangar', 'data': 'spaces/' + basic_name, 'text': {}, 'requiredTokens': []},
                     {'type': 'cmd_change_hangar_prem', 'data': 'spaces/' + premium_name, 'text': {}, 'requiredTokens': []}]))
    cdata = {'rev': requestID, 'prevRev': requestID - 1, ('eventsData', '_r'): udata[('eventsData', '_r')]}
    proxy.client.update(cPickle.dumps(cdata))
    proxy.client.onCmdResponse(requestID, AccountCommands.RES_SUCCESS, '')
    yield async(StatsHandler.update_stats, cbname='callback')(proxy.normalizedName, udata, ['eventsData'])
```

This example shows how `eventsData` is used to change the hangar appearance. The server sends a notification with specific hangar space paths, which the client then uses to load the appropriate 3D environment.

## 2. Types of Events (from EVENT_TYPE constants)

### Battle Quests
```python
# Example of a battle quest event
{
    'type': constants.EVENT_TYPE.BATTLE_QUEST,  # Value: 2
    'id': 'daily_mission_1',
    'startTime': 1586541600,  # Unix timestamp
    'finishTime': 1586627999,
    'conditions': {
        'preBattle': {
            'account': {...},  # Account requirements
            'vehicle': {...},  # Vehicle requirements
            'battle': {...}    # Battle type requirements
        },
        'bonus': {...},        # Bonus conditions
        'postBattle': {...}    # Post-battle conditions
    },
    'bonus': {
        'credits': 10000,
        'xp': 5000
    }
}
```

Battle quests require players to complete specific objectives in battles (like dealing damage, winning battles, etc.) and reward them with credits, XP, or items.

### Token Quests
```python
# Example of a token quest event
{
    'type': constants.EVENT_TYPE.TOKEN_QUEST,  # Value: 3
    'id': 'special_token_mission',
    'conditions': {...},
    'bonus': {
        'tokens': {
            'event_token': {'count': 1}
        }
    }
}
```

Token quests reward players with special tokens that can be used to unlock other content or be exchanged for rewards.

### Historical Battles
```python
# Example of a historical battle event
{
    'type': constants.EVENT_TYPE.HISTORICAL_BATTLES,  # Value: 4
    'id': 'kursk_1943',
    'arenaTypeID': 45,
    'vehSides': {
        '5393': 'A',  # Vehicle ID and team assignment
        '6145': 'B'
    },
    'vehicles': {
        '5393': {
            'ammoList': [...],  # Predefined ammo loadout
            'modules': {...}    # Predefined modules
        }
    },
    'localized_data': {
        'title': {'en': 'Battle of Kursk'},
        'shortDescr': {'en': 'Historical recreation of the Kursk battle'},
        'longDescr': {'en': 'Detailed description...'},
        'sideNames': {'A': 'Soviet', 'B': 'German'}
    }
}
```

Historical battles recreate famous tank battles with historically accurate vehicle configurations and teams.

### Personal Quests
```python
# Example of a personal quest event
{
    'type': constants.EVENT_TYPE.PERSONAL_QUEST,  # Value: 6
    'id': 'personal_mission_1',
    'conditions': {...},
    'bonus': {
        'vehicles': {
            '6401': {}  # Reward tank
        },
        'tankmen': {...}  # Reward crew member
    }
}
```

Personal quests are more complex missions that often form part of campaigns, with multiple stages and exclusive rewards like unique vehicles.

## 3. Client-Side Event Processing Examples

### Displaying Quests in the UI
```python
# From QuestsCurrentTab.py
def __invalidateEventsData(self):
    svrEvents = self._getEvents()  # Gets events from eventsData
    result = []
    for e in self.__applyFilters(svrEvents.values()):
        result.append(events_helpers.getEventInfo(e, svrEvents))

    self.as_setQuestsDataS(result, len(svrEvents))
```

The client processes events from `eventsData` to display them in the UI, filtering and formatting them appropriately.

### Showing Notifications for Available Quests
```python
# From QuestsControl.py
def __onQuestsUpdated(self, *args):
    # Check for quests that need attention
    if g_eventsCache.potapov.hasQuestsForReward():
        btnInfo = _createBtnInfo(QUESTS.QUESTSCONTROL_ADDITIONALTITLE_NEEDRECEIVEDAWARD, 
                                TOOLTIPS.PRIVATEQUESTS_QUESTCONTROL_RECEIVETHEAWARD, 
                                alert=True)
    elif g_eventsCache.potapov.hasQuestsForSelect():
        btnInfo = _createBtnInfo(QUESTS.QUESTSCONTROL_ADDITIONALTITLE_FREESLOTSANDFREEQUESTS, 
                                TOOLTIPS.PRIVATEQUESTS_QUESTCONTROL_AVAILABLE, 
                                alert=True)
```

The client uses `eventsData` to determine when to show notifications about available quests or rewards.

### Tracking Event Completion
```python
# From EventsCache.py
def isCompleted(self, progress=None):
    progress = progress or self._progress
    bonusLimit = self.bonusCond.getBonusLimit()
    if bonusLimit is not None:
        groupBy = self.bonusCond.getGroupByValue()
        if groupBy is None:
            return self.getBonusCount(progress=progress) >= bonusLimit
        # More conditions...
    return super(Quest, self).isCompleted()
```

The client tracks event completion status based on progress data stored in `eventsData`.

## 4. Event Modifiers (Actions)

```python
# Example of an action event
{
    'type': constants.EVENT_TYPE.ACTION,  # Value: 1
    'id': 'weekend_special',
    'startTime': 1586541600,
    'finishTime': 1586714399,
    'steps': [
        {
            'name': 'creditsTankmanXpRate',
            'params': {
                'rate': 2.0  # Double XP for crew
            }
        },
        {
            'name': 'creditsPrice',
            'params': {
                'discount': 0.15,  # 15% discount
                'goodsType': 'vehicle'  # On vehicles
            }
        }
    ]
}
```

Actions can modify various game parameters like:
- XP and credit earning rates
- Item prices (discounts)
- Premium account bonuses
- Special exchange rates

## 5. In-Game Events

```python
# Example of an in-game event
{
    'type': constants.EVENT_CLIENT_DATA.INGAME_EVENTS,  # Value: 7
    'eventBattles': {
        'vehicleTags': ['halloween'],
        'vehicles': [12345, 67890],
        'enabled': True,
        'arenaTypeID': 100
    }
}
```

In-game events can enable special game modes with unique rules, maps, or vehicle restrictions.

## 6. Notifications

```python
# Example of an event notification
{
    'type': constants.EVENT_CLIENT_DATA.NOTIFICATIONS,  # Value: 9
    'data': [
        {
            'type': 'promo_notification',
            'data': 'special_event_coming',
            'text': {
                'en': 'Special event coming soon!',
                'ru': 'Скоро специальное событие!'
            },
            'requiredTokens': []
        }
    ]
}
```

Event notifications can display messages to players about upcoming events, achievements, or special offers.

## Technical Implementation

All these event types are:
1. Stored in the `eventsData` dictionary in the player's account
2. Compressed with zlib and serialized with cPickle for transmission
3. Processed by the `EventsCache` class on the client
4. Trigger UI updates via the `events.onEventsDataChanged()` event
5. Accessed by various UI components to display information and enable functionality

This flexible system allows the game to deliver a wide variety of time-limited events, special game modes, and promotions to players without requiring client updates.